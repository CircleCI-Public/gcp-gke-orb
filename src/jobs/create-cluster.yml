description: >
  Creates a GKE cluster.

executor: <<parameters.executor>>

parameters:
  autopilot:
    description: >
      Create your GKE cluster in Autopilot mode.
      Autopilot clusters are managed and pre-configured with an optimized, production-ready cluster configuration.
    type: boolean
    default: false
  cluster:
    description: >
      Name of the GKE cluster to be created
    type: string
  additional_args:
    description: Additional arguments to "gcloud container clusters create"
    type: string
    default: ""
  no_output_timeout:
    description: >
      Elapsed time that the cluster creation command can run on CircleCI without output.
      The string is a decimal with unit suffix, such as “20m”, “1.25h”, “5s”
    type: string
    default: "10m"
  executor:
    description: >
        Executor to use for this job
    type: executor
    default: default

steps:
  - create-cluster:
      autopilot: <<parameters.autopilot>>
      cluster: <<parameters.cluster>>
      additional_args: <<parameters.additional_args>>
      no_output_timeout: <<parameters.no_output_timeout>>
